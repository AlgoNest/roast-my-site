
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Roast Result</title>

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- PDF Export -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
  body {
    margin:0;
    padding:0;
    font-family:'Inter',sans-serif;
    background:#F9FAFB;
    color:#111827;
  }

  main {
    max-width:900px;
    margin:80px auto;
    background:#fff;
    padding:40px;
    border-radius:16px;
    box-shadow:0 8px 24px rgba(0,0,0,0.05);
  }

  h1 {
    font-size:2.2rem;
    font-weight:700;
    margin-bottom:16px;
    text-align:center;
  }

  h2 {
    font-size:1.25rem;
    font-weight:600;
    color:#2563EB;
    margin-top:32px;
  }

  p {
    margin-top:8px;
  }

  ul {
    margin-left:20px;
    margin-top:8px;
  }

  li {
    padding:4px 0;
  }

  .cta {
    font-weight:700;
    color:#10B981;
    font-size:1.1rem;
    margin-top:12px;
    display:block;
  }

  .charts {
    margin:32px 0;
  }

  canvas {
    max-width:100%;
  }

  .actions {
    display:flex;
    justify-content:center;
    gap:16px;
    margin-top:32px;
  }

  button {
    padding:12px 20px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    font-weight:600;
    font-size:0.95rem;
  }

  .pdf-btn {
    background:#111827;
    color:#fff;
  }

  .back-link {
    background:#E5E7EB;
    color:#111827;
    text-decoration:none;
    padding:12px 20px;
    border-radius:10px;
    font-weight:600;
  }

  .site-urls {
    font-size:0.75rem;
    color:#6B7280;
    margin-top:64px;
    border-top:1px solid #E5E7EB;
    padding-top:24px;
  }

  /* PDF CLEANUP */
  @media print {
    .actions {
      display:none;
    }
  }
</style>
</head>

<body>

<main id="report">

  <h1>Stop Losing Traffic</h1>
  <p style="font-size:16px;text-align:center;color:#6B7280;">
    {{ url }} â€¢ Generated Report
  </p>

  <h2>Overall Score</h2>
  <p><strong>{{ roast.overall_score }}/10</strong></p>

  <h2>Performance Overview</h2>
  <div class="charts">
    <canvas id="scoreChart"></canvas>
  </div>

  <h2>Conversion Factors Breakdown</h2>
  <div class="charts">
    <canvas id="factorChart"></canvas>
  </div>

  <h2>Main Problems</h2>
  <ul>
    {% for item in roast.main_problems %}
      <li>{{ item }}</li>
    {% endfor %}
  </ul>

  <h2>Why People Won't Convert</h2>
  <ul>
    {% for item in roast.why_people_wont_convert %}
      <li>{{ item }}</li>
    {% endfor %}
  </ul>

  <h2>Headline Fixes</h2>
  <ul>
    {% for item in roast.headline_fixes %}
      <li>{{ item }}</li>
    {% endfor %}
  </ul>

  <h2>Improved CTA</h2>
  <p class="cta">{{ roast.cta_fix }}</p>

  <h2>Quick Wins</h2>
  <ul>
    {% for item in roast.quick_wins %}
      <li>{{ item }}</li>
    {% endfor %}
  </ul>

  <div class="site-urls">
    <h2>All URLs on the Website</h2>
    <ul>
      {% for u in roast.all_urls %}
        <li>{{ u }}</li>
      {% endfor %}
    </ul>
  </div>

</main>

<!-- ACTION BUTTONS -->
<div class="actions">
  <button class="pdf-btn" onclick="downloadPDF()">Download PDF</button>
  <a href="/" class="back-link">Roast Another Website</a>
</div>

<!-- CHARTS -->
<script>
  const currentScore = {{ roast.overall_score }};
  const expectedScore = 9;

  new Chart(document.getElementById('scoreChart'), {
    type: 'bar',
    data: {
      labels: ['Current', 'Expected'],
      datasets: [{
        data: [currentScore, expectedScore],
        backgroundColor: ['#EF4444', '#10B981'],
        borderRadius: 8
      }]
    },
    options: {
      scales: {
        y: { beginAtZero:true, max:10 }
      }
    }
  });

  new Chart(document.getElementById('factorChart'), {
    type: 'radar',
    data: {
      labels: ['Clarity','Trust','UX','Copy','CTA'],
      datasets: [
        {
          label:'Current',
          data:[4,3,5,4,3],
          backgroundColor:'rgba(239,68,68,0.2)',
          borderColor:'#EF4444'
        },
        {
          label:'Expected',
          data:[8,8,9,8,9],
          backgroundColor:'rgba(16,185,129,0.2)',
          borderColor:'#10B981'
        }
      ]
    },
    options: {
      scales: {
        r:{ min:0, max:10 }
      }
    }
  });
</script>

<!-- PDF EXPORT -->
<script>
  function downloadPDF() {
    const element = document.getElementById('report');

    const opt = {
      margin:       0.5,
      filename:     'Website-Report.pdf',
      image:        { type: 'jpeg', quality: 0.98 },
      html2canvas:  { scale: 2 },
      jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' }
    };

    html2pdf().set(opt).from(element).save();
  }
</script>

</body>
</html>
